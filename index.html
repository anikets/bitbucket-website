<!DOCTYPE html>
<head>
   <title>City Commute | Pune</title>

   <meta name="viewport" content="width=device-width, initial-scale=1">

   <!-- <link rel='stylesheet' type='text/css' href='jquery-ui.css' /> -->
   <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
   <!-- <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" /> -->
   <link rel='stylesheet' type='text/css' href='css/styles.css' />
   <style type="text/css"></style>

      <script type="text/javascript"
   src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCXK9_lmxAOwcJveHQnvJmZAuNKWJkqi8U&sensor=true&libraries=places">
   </script>
</head>

<body class='home-pg'>
   <div data-role="page" id="one">

   <div data-role="header">
      <h1>City Commute | Pune</h1>
   </div><!-- /header -->

   <div data-role="content">
      <p>Welcome to City Commute! This app helps you find public transport information about Pune.</p>

      <h3>Your location</h3>
      <div id='map'></div>
      <a href="map.html" data-role="button" data-ajax='false' data-transition="flip"onclick="_gaq.push(['_trackEvent', 'update locn link', 'clicked'])">Update location</a>

      <h3>Select your destination</h3>
      <input type="text" name="name" id="basic" data-mini="true" /> <strong>or</strong> <a href="#choose-location" data-role="button" data-rel='dialog' data-transition="pop" data-theme='e'>Choose from map</a>

      <ul data-role="listview" data-inset="true">
         <li><a href="#bus-s" data-transition="slide">Nearby Bus Stops</a></li>
         <li><a href="#rly-s" data-transition="slide">Nearby Railway Stations</a></li>
         <li><a href="#six-s" data-transition="slide">6 Seaters Routes</a></li>
      </ul>

      <a href="#about-app" data-role="button" data-rel="dialog" data-transition="flip">About this app</a>
   </div><!-- /content -->

   <div data-role="footer">
      <h4>This app aims to reduce your carbon footprint.</h4>
   </div><!-- /footer -->
</div><!-- /page -->


<!-- Start of page: buses -->
<div data-role="page" id="bus-s">

   <div data-role="header">
      <h1>City Commute | Pune</h1>
      <a href='#' data-rel="back">Back</a>
   </div><!-- /header -->

   <div data-role="content" data-theme="d" class='cont'>
      <h2>Nearby Bus Stops</h2>
      <div id='map'></div>
      <ul data-role="listview" data-inset="true" data-filter="true" class='bus-list'>
      </ul>
      <div data-role='popup' id='popup-menu'>
         <ul data-role='listview' data-inset='true'>
            <li class='visit-b'>Visit this bus stop</li>
            <li class='dirn'>Directions to here</li>
         </ul>
      </div>
   </div><!-- /content -->

   <div data-role="footer">
      <h4>Travel in green. Travel in groups.</h4>
   </div><!-- /footer -->
</div><!-- /page buses -->


<!-- Start of third page: #rly-s -->
<div data-role="page" id="rly-s">

   <div data-role="header" data-theme="e">
      <h1>City Commute | Pune</h1>
      <a href='#' data-rel="back">Back</a>
   </div><!-- /header -->

   <div data-role="content" data-theme="d"> 
      <h2>Nearby Railway Stations</h2>
      <div id='rly-map'></div>
   </div><!-- /content -->
   
   <div data-role="footer">
      <h4>Coded in Pune.</h4>
   </div><!-- /footer -->
</div><!-- /page rly-s -->


<!-- Start of third page: #six-s -->
<div data-role="page" id="six-s">

   <div data-role="header" data-theme="e">
      <h1>City Commute | Pune</h1>
      <a href='#' data-rel="back">Back</a>
   </div><!-- /header -->

   <div data-role="content" data-theme="d"> 
      <h2>6-Seaters</h2>
   </div><!-- /content -->
   
   <div data-role="footer">
      <h4>Coded in Pune.</h4>
   </div><!-- /footer -->
</div><!-- /page six-s -->


<!-- Start of third page: #popup -->
<div data-role="page" id="about-app">

   <div data-role="header" data-theme="e">
      <h1>City Commute | Pune</h1>
      <a href='#' data-rel="back">Back</a>
   </div><!-- /header -->

   <div data-role="content" data-theme="d">  
      <h2>About this app</h2>
      <p>I have an id of "popup" on my page container and only look like a dialog because the link to me had a <code>data-rel="dialog"</code> attribute which gives me this inset look and a <code>data-transition="pop"</code> attribute to change the transition to pop. Without this, I'd be styled as a normal page.</p>     
      <h3>Credits</h3>
      <h3>Philosophy</h3>
      <a href="mailto:aniket.a.s@gmail.com" data-role="button" class="ui-link-inherit">Write to us</a>
   </div><!-- /content -->
   
   <div data-role="footer">
      <h4>Built with great care.</h4>
   </div><!-- /footer -->
</div><!-- /page popup -->


<!-- Start of third page: #popup -->
<div data-role="page" id="choose-locations">

   <div data-role="header" data-theme="e">
      <h1>City Commute | Pune</h1>
   </div><!-- /header -->

   <div data-role="content" data-theme="d">
      <h2>Choose your location</h2>
   </div><!-- /content -->
   
   <div data-role="footer">
      <h4>Footer.</h4>
   </div><!-- /footer -->
</div><!-- /page popup -->


   <!-- <script src="js/jquery-1.8.3.js"></script> -->
   <!-- <script src="js/jquery-ui.js"></script> -->
   <!-- <script src="js/jquery.mobile-1.2.0.min.js"></script> -->
   <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
   <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
   <script src="js/scripts.js"></script>
   
   <script>
   jQuery(function($) {
      navigator.geolocation.getCurrentPosition(showCurrentLocation);
      function showCurrentLocation(location) {
         var latitude = location.coords.latitude;
         var longitude = location.coords.longitude;
         var accuracy = location.coords.accuracy;
         var gLatLng = new google.maps.LatLng(latitude, longitude);

         var mapOptions = {
            center: gLatLng,
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP
         };
         var map = new google.maps.Map(document.getElementById("map"), mapOptions);

         var marker = new google.maps.Marker({
            position: gLatLng,
            map: map,
            title: 'Your location.'
        });
      }

   });
   </script>




<script>
<!-- Script for buses page. -->
   jQuery(function($) {
      $('#bus-s').click(function() {
         navigator.geolocation.getCurrentPosition(initialize);
      })
   });
   function initialize(location) {
     var gLatLng = new google.maps.LatLng(location.coords.latitude, location.coords.longitude);

     map = new google.maps.Map(document.getElementById('map'), {
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       center: gLatLng,
       zoom: 15
    });

     var request = {
       location: gLatLng,
          // radius: 1000,
          types: ['bus_station'],
          rankBy: google.maps.places.RankBy.DISTANCE
       };
       infowindow = new google.maps.InfoWindow();
       var service = new google.maps.places.PlacesService(map);
       service.nearbySearch(request, callback);
    }

    function callback(results, status) {
      if (status == google.maps.places.PlacesServiceStatus.OK) {
         var htmlFrag = "";
         for (var i = 0; i < results.length; i++) {
            // console.log(results[i]);
            htmlFrag += "<li><a href='#popup-menu' data-transition='slide' data-lat='" +
            results[i].geometry.location.Ya + "' data-lng='" +
            results[i].geometry.location.Za + "'>" + results[i].name + "</a></li>\n";
         }
         $('ul.bus-list').append(htmlFrag);
         $('ul.bus-list').listview('refresh');
      }
   }

      // google.maps.event.addDomListener(window, 'load', initialize);
      </script>





</body>
</html>
